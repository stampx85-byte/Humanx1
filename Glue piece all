-- [ Whitelist System ]
local AllowedUsers = {"ffsww_1007", "A_ASPD", "noobnoobinwza","llukaku991","Yoojin889"}
local PlayerName = game:GetService("Players").LocalPlayer.Name
local isAllowed = false

for _, v in pairs(AllowedUsers) do
    if PlayerName == v then
        isAllowed = true
        break
    end
end

if not isAllowed then 
    return 
end

-- [ Original Script Starts Here ]
local DrRayLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/DrRay-UI-Library/main/DrRay.lua"))()
local window = DrRayLibrary:Load("v0.0.0.3", "Default")

-- [ Services ]
local Player = game:GetService("Players").LocalPlayer
local RS = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

-- [ Anti-AFK ]
Player.Idled:Connect(function()
    game:GetService("VirtualUser"):CaptureController()
    game:GetService("VirtualUser"):ClickButton2(Vector2.new())
end)

-- [ Global Config ]
local Config = {
    SlimeGroupHunter = false, 
    NoobyHunter = false,      
    NoobGroupHunter = false,  
    ThugHunter = false,
    EvilThugHunter = false, 
    DuckHunter = false, 
    SwordMasterHunter = false, 
    CutieBossHunter = false,
    ShinoaHunter = false, 
    CharaHunter = false, 
    EvilThugHunter = false, 
    UnknownBossHunter = false,
    SansHunter = false,
    KyoHunter = false,
    AutoLightSword = false,
    LightSwordPos = CFrame.new(554.939148, -29.1302795, -630.229553),
    BringChara = false,
    CharaPoint = CFrame.new(-29.4552612, -6.01364279, -2148.53149),
    AutoWarpToBoss = false,
    AutoRandom = false, 
    FastAttack = false, 
    AutoEquip = false, 
    ToolName = "", 
    AttackRange = 100,
    AutoFruit = false, AutoMelee = false, AutoDefense = false, AutoStrength = false,
    TargetHeight = 6 -- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏õ‡πá‡∏ô 6 ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á
}

-- [ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏™ ]
local BossToCheck = {
    ["Sans"] = "sans", ["Chara"] = "chara", ["Duck Boss"] = "duck boss",
    ["Shinoa"] = "shinoa", ["Cutie Boss"] = "cutie boss",
    ["Sword Master"] = "sword master", ["Unknown Boss"] = "unknown boss",
    ["Kyo"] = "kyo"
}
local PriorityTarget = nil

-- [ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏≠‡∏™ ]
local function Notify(title, text)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = 5
    })
end

Workspace.DescendantAdded:Connect(function(obj)
    if obj:IsA("Model") then
        local nameLower = string.lower(obj.Name)
        for displayName, internalName in pairs(BossToCheck) do
            if nameLower == internalName then
                task.wait(0.1)
                if obj:FindFirstChildOfClass("Humanoid") then
                    Notify("üì¢ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏≠‡∏™!", displayName .. " ‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß!")
                end
            end
        end
    end
end)

Workspace.DescendantRemoving:Connect(function(obj)
    if obj:IsA("Model") then
        local nameLower = string.lower(obj.Name)
        for displayName, internalName in pairs(BossToCheck) do
            if nameLower == internalName then
                Notify("üíÄ ‡∏ö‡∏≠‡∏™‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß!", displayName .. " ‡∏ñ‡∏π‡∏Å‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß!")
            end
        end
    end
end)

-- [ Logic ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ]
local function GetCharacter() return Player.Character or Player.CharacterAdded:Wait() end

local function FindBoss(name)
    local targetName = string.lower(name)
    for _, obj in ipairs(Workspace:GetDescendants()) do
        if obj:IsA("Model") and string.lower(obj.Name) == targetName then
            local hrp = obj:FindFirstChild("HumanoidRootPart")
            local hum = obj:FindFirstChildOfClass("Humanoid")
            if hrp and hum and hum.Health > 0 then return obj, hrp, hum end
        end
    end
    return nil
end

-- [ ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ö‡∏≠‡∏™ ]
task.spawn(function()
    while task.wait(0.1) do 
        PriorityTarget = nil
        if Config.AutoWarpToBoss then
            for displayName, internalName in pairs(BossToCheck) do
                local cfgName = displayName:gsub(" ", "") .. "Hunter"
                if Config[cfgName] then
                    local b, bh, hm = FindBoss(internalName)
                    if b then PriorityTarget = {b, bh} break end
                end
            end
        end
    end
end)

local function DoFastAttack()
    pcall(function()
        local Char = GetCharacter()
        local CombatRemote = Char:FindFirstChild("Combat_Event", true) or Player.Backpack:FindFirstChild("Combat_Event", true)
        local WeaponRemote = Char:FindFirstChild("Weapon_Event", true) or Player.Backpack:FindFirstChild("Weapon_Event", true)
        local HitboxModule = require(RS:WaitForChild("Module"):WaitForChild("Hitbox"))
        if (CombatRemote or WeaponRemote) and Char:FindFirstChild("HumanoidRootPart") then
            local Range = Config.AttackRange
            local Targets = HitboxModule:Overlap({MaxTarget = 100, Humanoid = Char.Humanoid, CF = Char.HumanoidRootPart.CFrame, Size = Vector3.new(Range, Range, Range)})
            if #Targets > 0 then
                for i = 1, 10 do 
                    if CombatRemote then CombatRemote:FireServer("Attack", Targets) end
                    if WeaponRemote then WeaponRemote:FireServer("Slash", Targets) end
                end
            end
        end
    end)
end

-- [ UI Setup ]
local tabMain = DrRayLibrary.newTab("‡∏ü‡∏≤‡∏£‡πå‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "rbxassetid://4483345998")
local tabBoss = DrRayLibrary.newTab("‡∏•‡πà‡∏≤‡∏ö‡∏≠‡∏™", "rbxassetid://4483345998")
local tabCombat = DrRayLibrary.newTab("‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ", "rbxassetid://4483345998")
local tabStats = DrRayLibrary.newTab("‡∏™‡πÄ‡∏ï‡∏ï‡∏±‡∏™", "rbxassetid://4483345998")
local tabMisc = DrRayLibrary.newTab("‡∏≠‡∏∑‡πà‡∏ô‡πÜ", "rbxassetid://4483345998")

tabMain.newToggle("‡∏ü‡∏≤‡∏£‡πå‡∏° Slime", "Slime & King Slime", false, function(s) Config.SlimeGroupHunter = s end)
tabMain.newToggle("‡∏ü‡∏≤‡∏£‡πå‡∏° Nooby", "Nooby & Cutie Noob", false, function(s) Config.NoobyHunter = s end)
tabMain.newToggle("‡∏ü‡∏≤‡∏£‡πå‡∏° Noob", "Elite & King Noob", false, function(s) Config.NoobGroupHunter = s end)
tabMain.newToggle("‡∏ü‡∏≤‡∏£‡πå‡∏° Thug", "Thug ‡∏õ‡∏Å‡∏ï‡∏¥", false, function(s) Config.ThugHunter = s end)
tabMain.newToggle("‡∏ü‡∏≤‡∏£‡πå‡∏° Evil Thug", "Evil Thug", false, function(s) Config.EvilThugHunter = s end)

tabBoss.newToggle("‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏´‡∏≤‡∏ö‡∏≠‡∏™", "‡πÑ‡∏õ‡∏´‡∏≤‡∏ö‡∏≠‡∏™‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î", false, function(s) Config.AutoWarpToBoss = s end)
tabBoss.newLabel("--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏≠‡∏™‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ---")
tabBoss.newToggle("‡∏•‡πà‡∏≤ Kyo", "", false, function(s) Config.KyoHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Sans", "", false, function(s) Config.SansHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Chara", "", false, function(s) Config.CharaHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Shinoa", "", false, function(s) Config.ShinoaHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Unknown Boss", "", false, function(s) Config.UnknownBossHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Duck Boss", "", false, function(s) Config.DuckHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Sword Master", "", false, function(s) Config.SwordMasterHunter = s end)
tabBoss.newToggle("‡∏•‡πà‡∏≤ Cutie Boss", "", false, function(s) Config.CutieBossHunter = s end)

tabCombat.newToggle("‡∏ñ‡∏∑‡∏≠‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£", false, function(s) Config.AutoEquip = s end)
local ToolList = {"Cursed Scythe", "Epic Sword", "Youru", "True Yorou", "Elucidator", "Dual Sword", "Real Knife", "True Knife", "Saber", "Bisento", "Amethyst Scythe", "Lighting Sword", "Limitless", "Black leg", "OFA [Deku]", "Combat"}
tabCombat.newDropdown("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò", "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏∑‡∏≠", ToolList, function(selected) Config.ToolName = selected end)
tabCombat.newToggle("‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß (Fast Attack)", "", false, function(s) Config.FastAttack = s end)
tabCombat.newSlider("‡∏£‡∏∞‡∏¢‡∏∞‡πÇ‡∏à‡∏°‡∏ï‡∏µ", "", 3000, false, function(num) Config.AttackRange = num end)

tabStats.newButton("‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡πÄ‡∏ï‡∏ï‡∏±‡∏™ (‡πÄ‡∏á‡∏¥‡∏ô)", "", function() RS.Remote.RemoteEvent.Shop_Event:FireServer("Shop","Reset","Stats","Money") end)
tabStats.newToggle("‡∏≠‡∏±‡∏û‡∏ú‡∏•‡∏õ‡∏µ‡∏®‡∏≤‡∏à", "", false, function(s) Config.AutoFruit = s end)
tabStats.newToggle("‡∏≠‡∏±‡∏û‡∏´‡∏°‡∏±‡∏î", "", false, function(s) Config.AutoMelee = s end)
tabStats.newToggle("‡∏≠‡∏±‡∏û‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô", "", false, function(s) Config.AutoDefense = s end)
tabStats.newToggle("‡∏≠‡∏±‡∏û‡∏î‡∏≤‡∏ö/‡∏Å‡∏≥‡∏•‡∏±‡∏á", "", false, function(s) Config.AutoStrength = s end)

tabMisc.newToggle("‡∏ó‡∏≥‡∏î‡∏≤‡∏ö‡πÅ‡∏™‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "", false, function(s) Config.AutoLightSword = s end)
tabMisc.newToggle("‡∏î‡∏π‡∏î Chara", "", false, function(s) Config.BringChara = s end)
tabMisc.newToggle("‡∏™‡∏∏‡πà‡∏°‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "", false, function(s) Config.AutoRandom = s end)

-- [ Loop ‡∏´‡∏•‡∏±‡∏Å ]
task.spawn(function()
    while true do
        RunService.Heartbeat:Wait()
        
        -- Logic ‡∏î‡∏π‡∏î Chara
        if Config.BringChara then
            for _, obj in ipairs(Workspace:GetDescendants()) do
                if obj:IsA("Model") and string.lower(obj.Name) == "chara" then
                    local hum = obj:FindFirstChildOfClass("Humanoid")
                    local hrp = obj:FindFirstChild("HumanoidRootPart")
                    if hum and hum.Health > 0 and hrp then
                        obj:PivotTo(Config.CharaPoint)
                        hrp.Velocity = Vector3.new(0,0,0)
                    end
                end
            end
        end

        pcall(function()
            local Char = GetCharacter()
            local Hrp = Char.HumanoidRootPart
            local Hum = Char.Humanoid
            
            -- ‡∏ö‡∏≠‡∏™
            local currentBossHrp = nil
            if PriorityTarget then
                local targetHrp = PriorityTarget[2]
                local targetHum = PriorityTarget[1]:FindFirstChildOfClass("Humanoid")
                if targetHum and targetHum.Health > 0 then currentBossHrp = targetHrp end
            end

            -- ‡∏°‡∏≠‡∏™
            local targetObj, targetHrp, targetHum = nil, nil, nil
            if not currentBossHrp then
                if Config.KyoHunter then targetObj, targetHrp, targetHum = FindBoss("kyo")
                elseif Config.SlimeGroupHunter then
                    local b, bh, hm = FindBoss("slime")
                    if not b then b, bh, hm = FindBoss("king slime") end
                    targetObj, targetHrp, targetHum = b, bh, hm
                elseif Config.NoobyHunter then
                    local b, bh, hm = FindBoss("nooby")
                    if not b then b, bh, hm = FindBoss("cutie noob") end
                    targetObj, targetHrp, targetHum = b, bh, hm
                elseif Config.NoobGroupHunter then
                    local b, bh, hm = FindBoss("elite noob")
                    if not b then b, bh, hm = FindBoss("king noob") end
                    targetObj, targetHrp, targetHum = b, bh, hm
                elseif Config.ThugHunter then targetObj, targetHrp, targetHum = FindBoss("thug")
                elseif Config.EvilThugHunter then targetObj, targetHrp, targetHum = FindBoss("evil thug")
                elseif Config.CutieBossHunter then targetObj, targetHrp, targetHum = FindBoss("cutie boss")
                elseif Config.SansHunter then targetObj, targetHrp, targetHum = FindBoss("sans")
                elseif Config.CharaHunter then targetObj, targetHrp, targetHum = FindBoss("chara")
                elseif Config.UnknownBossHunter then targetObj, targetHrp, targetHum = FindBoss("unknown boss")
                elseif Config.DuckHunter then targetObj, targetHrp, targetHum = FindBoss("duck boss")
                elseif Config.SwordMasterHunter then targetObj, targetHrp, targetHum = FindBoss("sword master")
                elseif Config.ShinoaHunter then targetObj, targetHrp, targetHum = FindBoss("shinoa")
                end
            end

            -- Action (‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏õ‡πá‡∏ô +6)
            if currentBossHrp then
                Hum.PlatformStand = true
                Hrp.CFrame = CFrame.new(currentBossHrp.Position + Vector3.new(0, Config.TargetHeight, 0), currentBossHrp.Position)
                Hrp.Velocity = Vector3.new(0,0,0)
                if Config.FastAttack then DoFastAttack() end
            elseif targetHrp and targetHum and targetHum.Health > 0 then
                Hum.PlatformStand = true
                Hrp.CFrame = CFrame.new(targetHrp.Position + Vector3.new(0, Config.TargetHeight, 0), targetHrp.Position)
                Hrp.Velocity = Vector3.new(0,0,0)
                if Config.FastAttack then DoFastAttack() end
            else
                Hum.PlatformStand = false
                if Config.AutoLightSword then
                    Hrp.CFrame = Config.LightSwordPos
                    Hrp.Velocity = Vector3.new(0,0,0)
                elseif Config.BringChara then
                    Hrp.CFrame = Config.CharaPoint * CFrame.new(0, Config.TargetHeight, 0)
                    Hrp.Velocity = Vector3.new(0,0,0)
                    if Config.FastAttack then DoFastAttack() end
                end
            end
        end)
    end
end)

-- [ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö Auto Equip ‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏Ç‡∏∂‡πâ‡∏ô ]
task.spawn(function()
    while task.wait(0.3) do
        if Config.AutoEquip and Config.ToolName ~= "" then
            pcall(function()
                local Char = GetCharacter()
                local Backpack = Player.Backpack
                local CurrentTool = Char:FindFirstChildOfClass("Tool")
                
                -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                if not CurrentTool or CurrentTool.Name ~= Config.ToolName then
                    local TargetTool = Backpack:FindFirstChild(Config.ToolName)
                    if TargetTool then
                        Char.Humanoid:UnequipTools() -- ‡∏ß‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤
                        task.wait(0.1)
                        Char.Humanoid:EquipTool(TargetTool) -- ‡∏ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                    end
                end
            end)
        end
    end
end)

-- Stats Loop
task.spawn(function()
    while task.wait(0.3) do
        if Config.AutoRandom then RS.Remote.RemoteEvent.Shop_Event:FireServer("Shop","Random Fruity","Money") end
        if Config.AutoFruit then RS.Remote.RemoteEvent.UI_Event:FireServer("Add Stats","DevilFruit","1") end
        if Config.AutoMelee then RS.Remote.RemoteEvent.UI_Event:FireServer("Add Stats","Melee","1") end
        if Config.AutoDefense then RS.Remote.RemoteEvent.UI_Event:FireServer("Add Stats","Defense","1") end
        if Config.AutoStrength then RS.Remote.RemoteEvent.UI_Event:FireServer("Add Stats","Strength","1") end
    end
end)
