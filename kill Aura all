-- [[ Humanx1 Loader - Safe Script Switcher (Chat Protected) ]]

local Player = game.Players.LocalPlayer
local MyName = Player.Name

_G.VIP_LIST = _G.VIP_LIST or {
    ["A_ASPD"] = true,
    ["ffsww_1007"] = true,
    ["HACKER_18050"] = true,
    ["evils915"] = true,
    ["TV_BTS1"] = true
}

-- [!] ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ü‡∏£‡∏µ ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏¢‡∏∏‡πà‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°
local function SafeRemoveFreeScript()
    warn("üßπ Cleaning up Free Script while protecting Chat...")

    -- 1. ‡∏´‡∏¢‡∏∏‡∏î Logic ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
    _G.Running = false
    _G.Aura = false

    -- 2. ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ UI ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Roblox
    local coreGui = game:GetService("CoreGui")
    for _, v in pairs(coreGui:GetChildren()) do
        if v:IsA("ScreenGui") then
            -- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ UI ‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö (‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°)
            local isSystemGui = (
                v.Name == "RobloxGui" or 
                v.Name == "ChatGui" or 
                v.Name == "BubbleChat" or 
                v.Name == "ExperienceChat-Client" or -- ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡πÉ‡∏´‡∏°‡πà
                v.Name == "PlayerList" or
                v:FindFirstChild("RobloxGui") or
                v.Name:match("Roblox")
            )
            
            -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏° ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡∏ã‡∏∂‡πà‡∏á‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ UI ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå)
            if not isSystemGui then
                v:Destroy()
            end
        end
    end
    
    task.wait(0.5)
end

-- 3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ô VIP
local function UpgradeToVIP()
    SafeRemoveFreeScript() -- ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ü‡∏£‡∏µ
    print("üíé [SUCCESS] VIP Activated: Running Kill Aura 20")
    task.defer(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/stampx85-byte/Humanx1/refs/heads/main/Kill%20Aura%2020"))()
    end)
end

-- 4. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏ä‡∏ó
local function findByPartialName(name)
    name = name:lower()
    for _, p in pairs(game.Players:GetPlayers()) do
        if p.Name:lower():sub(1, #name) == name then return p end
    end
end

local function ListenChat(speaker, msg)
    local args = msg:split(" ")
    if args[1]:lower() == "!givevip" and args[2] then
        if _G.VIP_LIST[speaker.Name] then
            local target = findByPartialName(args[2])
            if target == Player then
                if not _G.VIP_LIST[Player.Name] then
                    _G.VIP_LIST[Player.Name] = true
                    UpgradeToVIP()
                end
            end
        end
    end
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ä‡∏ó
for _, p in pairs(game.Players:GetPlayers()) do 
    p.Chatted:Connect(function(msg) ListenChat(p, msg) end) 
end
game.Players.PlayerAdded:Connect(function(p) 
    p.Chatted:Connect(function(msg) ListenChat(p, msg) end) 
end)

-- 5. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
if _G.VIP_LIST[MyName] then
    print("üíé ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö VIP: " .. MyName)
    loadstring(game:HttpGet("https://raw.githubusercontent.com/stampx85-byte/Humanx1/refs/heads/main/Kill%20Aura%2020"))()
else
    print("üÜì ‡∏£‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ü‡∏£‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: " .. MyName)
    loadstring(game:HttpGet("https://raw.githubusercontent.com/stampx85-byte/Humanx1/refs/heads/main/kill%20aura%20City%20Thailand%202"))()
end
