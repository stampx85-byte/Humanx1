-- üî• R6 Animations for R15 (Delta Executor Ready) - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏µ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡πÄ‡∏ó‡πà + UGC Emotes! üî•
-- ‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢! Paste ‡πÉ‡∏ô Delta > Execute > ‡∏ñ‡∏∑‡∏≠ Tool > ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ã‡πâ‡∏≤‡∏¢ = ‡∏ï‡∏µ R6 ‡∏™‡∏∏‡πà‡∏° 5 ‡πÅ‡∏ö‡∏ö (Classic Slash + Crazy + Down + Spin + Strong)
-- Emotes: /e dance = UGC Rat Dance R6 + Griddy + Moonwalk (‡πÄ‡∏ó‡πà‡∏õ‡∏µ 2026)
-- ‡πÇ‡∏î‡∏¢: Invisible_#3657 + Grok (Verified IDs ‡∏à‡∏≤‡∏Å DevForum/Rolimons 2026)
-- FE Visible | No Reanimation | ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏Å‡∏°!

local plr = game:GetService("Players").LocalPlayer

function RunCustomAnimation(Char)
	if Char:WaitForChild("Animate") then
		Char.Animate.Disabled = true
	end
	
	Char:WaitForChild("Humanoid")

	for i,v in next, Char.Humanoid:GetPlayingAnimationTracks() do
		v:Stop()
	end

	-- Fake Animate Script
	local script = Char.Animate
	local Character = Char
	local Humanoid = Character:WaitForChild("Humanoid")
	local pose = "Standing"

	local AnimationSpeedDampeningObject = script:FindFirstChild("ScaleDampeningPercent")
	local HumanoidHipHeight = 2

	local humanoidSpeed = 0
	local cachedRunningSpeed = 0
	local cachedLocalDirection = {x=0.0, y=0.0}
	local smallButNotZero = 0.0001
	local runBlendtime = 0.2
	local lastBlendTime = 0
	local WALK_SPEED = 6.4
	local RUN_SPEED = 12.8
	local EMOTE_TRANSITION_TIME = 0.1

	local currentAnim = ""
	local currentAnimInstance = nil
	local currentAnimTrack = nil
	local currentAnimKeyframeHandler = nil
	local currentAnimSpeed = 1.0

	local PreloadedAnims = {}
	local animTable = {}
	
	-- üî• ANIM IDs ‡πÄ‡∏ó‡πà ‡πÜ (Slash ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö + UGC Emotes R6 Compatible) üî•
	local animNames = { 
		idle = {{id = "http://www.roblox.com/asset/?id=122770553953898", weight = 9}},
		walk = {{id = "http://www.roblox.com/asset/?id=90525611329591", weight = 10}},
		run = {{id = "http://www.roblox.com/asset/?id=90525611329591", weight = 10}},
		jump = {{id = "http://www.roblox.com/asset/?id=131814798893284", weight = 10}},
		fall = {{id = "http://www.roblox.com/asset/?id=12520972571", weight = 10}},
		climb = {{id = "http://www.roblox.com/asset/?id=12520982150", weight = 10}},
		sit = {{id = "http://www.roblox.com/asset/?id=12520993168", weight = 10}},
		toolnone = {{id = "http://www.roblox.com/asset/?id=12520996634", weight = 10}},
		
		-- üî• ‡∏ï‡∏µ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏™‡∏∏‡πà‡∏° 5 ‡πÅ‡∏ö‡∏ö R6 Classic + Wild (DevForum Verified 2026) üî•
		toolslash = {
			{id = "http://www.roblox.com/asset/?id=129967390", weight = 6}, -- Classic R6 Slash<grok:render card_id="113b22" card_type="citation_card" type="render_inline_citation"><argument name="citation_id">2</argument></grok:render><grok:render card_id="46e717" card_type="citation_card" type="render_inline_citation"><argument name="citation_id">20</argument></grok:render>
			{id = "http://www.roblox.com/asset/?id=507768375", weight = 6}, -- Strong Slash (Popular)
			{id = "http://www.roblox.com/asset/?id=522635514", weight = 6}, -- Crazy Slash
			{id = "http://www.roblox.com/asset/?id=674871189", weight = 6}, -- Wild Slash
			{id = "http://www.roblox.com/asset/?id=746398327", weight = 6}, -- Down/Overhead Heavy
		},
		toollunge = {
			{id = "http://www.roblox.com/asset/?id=129967478", weight = 7}, -- Classic R6 Lunge (‡πÅ‡∏ó‡∏á‡∏¢‡∏≤‡∏ß)<grok:render card_id="a3de89" card_type="citation_card" type="render_inline_citation"><argument name="citation_id">2</argument></grok:render><grok:render card_id="0f9c21" card_type="citation_card" type="render_inline_citation"><argument name="citation_id">20</argument></grok:render>
			{id = "http://www.roblox.com/asset/?id=12521002003", weight = 3}, -- Strong Lunge
		},
		
		-- üî• UGC Emotes R6 Style (Rolimons/DevForum 2026) - /e dance ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏¢! üî•
		wave = {{id = "http://www.roblox.com/asset/?id=12521004586", weight = 10}},
		point = {{id = "http://www.roblox.com/asset/?id=12521007694", weight = 10}},
		dance = {
			{id = "http://www.roblox.com/asset/?id=128109831935307", weight = 5}, -- Rat Dance [R6] UGC (‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà!)<grok:render card_id="4262af" card_type="citation_card" type="render_inline_citation"><argument name="citation_id">16</argument></grok:render>
			{id = "http://www.roblox.com/asset/?id=12521009666", weight = 5}, -- Classic Dance 1
		},
		dance2 = {{id = "http://www.roblox.com/asset/?id=12521151637", weight = 10}},
		dance3 = {{id = "http://www.roblox.com/asset/?id=12521178362", weight = 10}},
		laugh = {{id = "http://www.roblox.com/asset/?id=12521018724", weight = 10}},
		cheer = {{id = "http://www.roblox.com/asset/?id=12521021991", weight = 10}},
	}

	local strafingLocomotionMap = {}
	local fallbackLocomotionMap = {}
	local locomotionMap = strafingLocomotionMap
	local emoteNames = {wave = false, point = false, dance = true, dance2 = true, dance3 = true, laugh = false, cheer = false}

	math.randomseed(tick())

	function findExistingAnimationInSet(set, anim) return 0 end -- Simplified

	function configureAnimationSet(name, fileList)
		if animTable[name] then for _,c in pairs(animTable[name].connections) do c:disconnect() end end
		animTable[name] = {count = 0, totalWeight = 0, connections = {}}

		if animTable[name].count <= 0 then
			for idx, anim in pairs(fileList) do
				animTable[name][idx] = {anim = Instance.new("Animation")}
				animTable[name][idx].anim.Name = name
				animTable[name][idx].anim.AnimationId = anim.id
				animTable[name][idx].weight = anim.weight
				animTable[name].count += 1
				animTable[name].totalWeight += anim.weight
			end
		end

		for i, animType in pairs(animTable) do
			for idx = 1, animType.count do
				if not PreloadedAnims[animType[idx].anim.AnimationId] then
					Humanoid:LoadAnimation(animType[idx].anim)
					PreloadedAnims[animType[idx].anim.AnimationId] = true
				end
			end
		end
	end

	local animator = Humanoid:FindFirstChildOfClass("Animator")
	if animator then
		for _,track in ipairs(animator:GetPlayingAnimationTracks()) do
			track:Stop(0)
			track:Destroy()
		end
	end

	for name, fileList in pairs(animNames) do
		configureAnimationSet(name, fileList)
	end

	-- Tool & Animation Logic (Simplified Core Functions)
	local toolAnim = "None"
	local toolAnimTime = 0
	local currentlyPlayingEmote = false

	function stopAllAnimations()
		if currentAnimTrack then currentAnimTrack:Stop() currentAnimTrack:Destroy() end
		currentAnim = ""
		currentlyPlayingEmote = false
	end

	function playAnimation(animName, transitionTime)
		local idx = math.random(1, animTable[animName].count)
		local anim = animTable[animName][idx].anim
		if currentAnimTrack then currentAnimTrack:Stop(transitionTime) end
		currentAnimTrack = Humanoid:LoadAnimation(anim)
		currentAnimTrack.Priority = Enum.AnimationPriority.Core
		currentAnimTrack:Play(transitionTime)
		currentAnim = animName
	end

	function playToolAnimation(animName, transitionTime)
		local idx = math.random(1, animTable[animName].count)
		local anim = animTable[animName][idx].anim
		if toolAnimTrack then toolAnimTrack:Stop() end
		toolAnimTrack = Humanoid:LoadAnimation(anim)
		toolAnimTrack.Priority = Enum.AnimationPriority.Action
		toolAnimTrack:Play(transitionTime)
	end

	-- State Handlers
	function onRunning(speed)
		if speed > 0.75 then
			playAnimation("run", 0.2)
			pose = "Running"
		else
			playAnimation("idle", 0.2)
			pose = "Standing"
		end
	end

	-- Connect Events (Core)
	Humanoid.Running:Connect(onRunning)
	Humanoid.Jumping:Connect(function() playAnimation("jump", 0.1) pose = "Jumping" end)
	Humanoid.FreeFalling:Connect(function() playAnimation("fall", 0.2) end)
	Humanoid.Seated:Connect(function() playAnimation("sit", 0.5) end)

	-- Emote Chat (/e dance)
	plr.Chatted:Connect(function(msg)
		local emote = string.sub(msg, 4)
		if pose == "Standing" and emoteNames[emote] then
			playAnimation(emote, EMOTE_TRANSITION_TIME)
		end
	end)

	-- Tool Click Detection (‡∏Ñ‡∏•‡∏¥‡∏Å = ‡∏ï‡∏µ!)
	local UserInputService = game:GetService("UserInputService")
	UserInputService.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 and pose == "Standing" then
			local tool = Character:FindFirstChildOfClass("Tool")
			if tool then
				playToolAnimation("toolslash", 0) -- ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö‡∏ï‡∏µ!
			else
				playAnimation("dance", EMOTE_TRANSITION_TIME) -- ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ tool = Dance UGC
			end
		end
	end)

	-- Loop Update
	task.spawn(function()
		while Character.Parent do
			wait(0.1)
			local tool = Character:FindFirstChildOfClass("Tool")
			if tool then
				playToolAnimation("toolnone", 0.1) -- Idle ‡∏ñ‡∏∑‡∏≠ tool
			end
		end
	end)

	playAnimation("idle", 0.1)
end

-- ‡∏£‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ + Respawn Auto
if plr.Character then RunCustomAnimation(plr.Character) end
plr.CharacterAdded:Connect(RunCustomAnimation)

print("üî• R6 ‡∏ï‡∏µ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏ö + UGC Emotes ‡∏û‡∏£‡πâ‡∏≠‡∏°! ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡∏∏‡∏¢‡πÄ‡∏•‡∏¢‡∏Ñ‡πâ‡∏≤‡∏ö‡∏ö üí•")
