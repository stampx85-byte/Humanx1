-- [[ üíÄ SANS COMPLETE CORE (OUTFIT FIX - ADD ONLY) üíÄ ]]

local player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local Debris = game:GetService("Debris")

-- === [ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á ] ===
local MAIN_MUSIC = "116239586076437" 
local HORROR_BUTTON_SOUND = "112509204575968" -- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏î

local function PlayMusic(id) 
    pcall(function() workspace.DRadio_Script.Event:FireServer(tostring(id)) end)
end

-- === [ ‡∏£‡∏∞‡∏ö‡∏ö UI ‡∏õ‡∏∏‡πà‡∏° "‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏î" (Horror Style) ] ===
local function CreateHorrorButton()
    local sg = Instance.new("ScreenGui")
    sg.Name = "HorrorGui"
    sg.Parent = player:WaitForChild("PlayerGui")
    sg.ResetOnSpawn = false

    local btn = Instance.new("TextButton")
    btn.Name = "RoundCutButton"
    btn.Parent = sg
    btn.Size = UDim2.new(0, 120, 0, 45)
    btn.Position = UDim2.new(0.5, -60, 0.85, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡∏Ñ‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á
    btn.BackgroundColor3 = Color3.fromRGB(20, 0, 0) -- ‡∏î‡∏≥‡πÅ‡∏î‡∏á‡∏°‡∏∑‡∏î‡πÜ
    btn.BorderSizePixel = 2
    btn.BorderColor3 = Color3.fromRGB(150, 0, 0)
    btn.Text = "‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏î"
    btn.TextColor3 = Color3.fromRGB(255, 0, 0)
    btn.Font = Enum.Font.Creepster or Enum.Font.SpecialElite -- ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÅ‡∏ô‡∏ß‡∏™‡∏¢‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç
    btn.TextSize = 25
    
    -- ‡πÉ‡∏™‡πà UIStroke ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏î‡∏π‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
    local stroke = Instance.new("UIStroke")
    stroke.Thickness = 1.5
    stroke.Color = Color3.fromRGB(0, 0, 0)
    stroke.Parent = btn

    -- ‡πÉ‡∏™‡πà UICorner ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4)
    corner.Parent = btn

    -- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏Å‡∏î
    btn.MouseButton1Click:Connect(function()
        -- ‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏™‡∏µ‡πÅ‡∏î‡∏á
        btn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        PlayMusic(HORROR_BUTTON_SOUND) -- ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏î
        
        task.wait(0.2)
        btn.BackgroundColor3 = Color3.fromRGB(20, 0, 0)
        btn.TextColor3 = Color3.fromRGB(255, 0, 0)
    end)
    
    -- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏•‡∏≤‡∏Å‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ú‡πà‡∏≤‡∏ô (Hover)
    btn.MouseEnter:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.3), {BorderColor3 = Color3.fromRGB(255, 255, 255)}):Play()
    end)
    btn.MouseLeave:Connect(function()
        TweenService:Create(btn, TweenInfo.new(0.3), {BorderColor3 = Color3.fromRGB(150, 0, 0)}):Play()
    end)
end

-- ‡∏£‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°
CreateHorrorButton()

-- === [ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏û‡∏π‡∏î ] ===
local sansQuotes = {
    "‡∏°‡∏≤‡∏°‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡∏ö‡∏°‡πà‡∏≤‡∏°‡∏≤",
    "10-20‡∏ö‡∏≤‡∏ó‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πâ‡∏≠",
    "‡∏à‡∏±‡∏î‡πÑ‡∏õ‡∏ß‡∏±‡∏¢‡∏£‡∏∏‡πà‡∏ô",
    "‡∏Å‡∏¥‡∏ô‡∏°‡∏≤‡∏°‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞",
    "‡∏°‡∏µ‡πÄ‡∏®‡∏©‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏´‡∏°‡∏ô‡∏¥?"
}

-- === [ ‡∏£‡∏∞‡∏ö‡∏ö NameTag ‡∏™‡∏µ‡∏£‡∏∏‡πâ‡∏á ] ===
local currentDisplayText = "SANS"

task.spawn(function()
    local hue = 0
    while true do
        hue = hue + 0.01
        local rainbowColor = Color3.fromHSV(hue % 1, 0.7, 1)
        pcall(function()
            game:GetService("ReplicatedStorage").NameTagRemoteEvent:FireServer(currentDisplayText, rainbowColor, 13)
        end)
        task.wait(0.05)
    end
end)

local function SansSpeak(text)
    local chosenText = text or sansQuotes[math.random(1, #sansQuotes)]
    local fullText = tostring(chosenText)
    for i = 1, #fullText do
        currentDisplayText = string.sub(fullText, 1, i)
        task.wait(0.05)
    end
end

-- === [ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∏‡∏î (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á Accessory ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏ö) ] ===
local function applyOutfitWithOriginal()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local BloxbizRemotes = ReplicatedStorage:WaitForChild("BloxbizRemotes", 5)
    
    if not BloxbizRemotes then return end
    local BloxRemote = BloxbizRemotes:WaitForChild("CatalogOnApplyOutfit")

    local desc = humanoid:GetAppliedDescription()
    local currentAccessories = desc:GetAccessories(true) 

    table.insert(currentAccessories, {
        ["AssetId"] = 100524494111544, 
        ["AccessoryType"] = Enum.AccessoryType.Waist,
        ["IsLayered"] = false
    })

    local outfitData = {
        ["Accessories"] = currentAccessories,
        ["Shirt"] = desc.Shirt,
        ["Pants"] = desc.Pants,
        ["GraphicTShirt"] = desc.GraphicTShirt,
        ["Face"] = desc.Face,
        ["Head"] = desc.Head,
        ["Torso"] = desc.Torso,
        ["LeftArm"] = desc.LeftArm,
        ["RightArm"] = desc.RightArm,
        ["LeftLeg"] = desc.LeftLeg,
        ["RightLeg"] = desc.RightLeg,
        ["HeadColor"] = desc.HeadColor,
        ["TorsoColor"] = desc.TorsoColor,
        ["LeftArmColor"] = desc.LeftArmColor,
        ["RightArmColor"] = desc.RightArmColor,
        ["LeftLegColor"] = desc.LeftLegColor,
        ["RightLegColor"] = desc.RightLegColor,
        ["HeightScale"] = desc.HeightScale,
        ["WidthScale"] = desc.WidthScale,
        ["DepthScale"] = desc.DepthScale,
        ["HeadScale"] = desc.HeadScale,
        ["ProportionScale"] = desc.ProportionScale,
        ["BodyTypeScale"] = desc.BodyTypeScale
    }

    BloxRemote:FireServer(outfitData)
end

-- === [ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) ] ===
function RunCustomAnimation(Char)
    if not Char then return end
    local Humanoid = Char:WaitForChild("Humanoid", 10)
    local HRP = Char:WaitForChild("HumanoidRootPart", 10)
    
    if Char:FindFirstChild("Animate") then Char.Animate.Disabled = true end

    local currentAnimTrack = nil
    local lastState = "Idle"

    local animTable = {}    
    local animNames = { 
        spawn = {{id = "rbxassetid://90183548743095"}}, 
        idle = {{id = "rbxassetid://109101932760209"}},  
        move = {{id = "rbxassetid://96677259739746"}}
    }

    for name, fileList in pairs(animNames) do
        animTable[name] = {count = 0}
        for idx, anim in pairs(fileList) do
            animTable[name][idx] = {anim = Instance.new("Animation")}
            animTable[name][idx].anim.AnimationId = anim.id
            animTable[name].count += 1
        end
    end

    local function playAnim(name, loop, speed)
        if not animTable[name] or not Humanoid then return end
        if currentAnimTrack then currentAnimTrack:Stop(0.1) end
        local idx = math.random(1, animTable[name].count)
        currentAnimTrack = Humanoid:LoadAnimation(animTable[name][idx].anim)
        currentAnimTrack.Looped = loop
        currentAnimTrack:Play(0.1)
        if speed then currentAnimTrack:AdjustSpeed(speed) end
        return currentAnimTrack
    end

    Humanoid.Running:Connect(function(speed)
        if speed > 2 then 
            if lastState ~= "Moving" then 
                lastState = "Moving" 
                playAnim("move", true, 1.4)
                PlayMusic("86153730436011")
            end
        else 
            if lastState ~= "Idle" then 
                lastState = "Idle" 
                playAnim("idle", true)
                PlayMusic(MAIN_MUSIC)
            end 
        end
    end)

    task.spawn(function()
        HRP.Anchored = true
        PlayMusic("1060573050") 
        local st = playAnim("spawn", false)
        if st then st.Ended:Wait() end
        HRP.Anchored = false
        playAnim("idle", true)
        task.spawn(function() SansSpeak() end)
        PlayMusic(MAIN_MUSIC)
    end)
end

-- === [ ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ] ===
if player.Character then
    task.spawn(function() RunCustomAnimation(player.Character) end)
    applyOutfitWithOriginal()
end

player.CharacterAdded:Connect(function(char)
    task.spawn(function() RunCustomAnimation(char) end)
    task.wait(2) 
    applyOutfitWithOriginal()
end)
